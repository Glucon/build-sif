Bootstrap: docker-archive
From: ./debian13.0.tar

%labels
    Maintainer yangys
    App cp2k-apt in debian 13.0

%post -c /bin/bash
    sed -i 's|deb.debian.org|mirrors.cernet.edu.cn|g' /etc/apt/sources.list.d/debian.sources
    sed -i 's|security.debian.org/debian-security|mirrors.cernet.edu.cn/debian-security|g' /etc/apt/sources.list.d/debian.sources

    apt-get update && apt-get install -y --no-install-recommends \
        cp2k

    apt-get autoremove -y
    apt-get clean
    rm -rf /var/lib/apt/lists/* /root/.cache

%environment
    export OMPI_ALLOW_RUN_AS_ROOT=1
    export OMPI_ALLOW_RUN_AS_ROOT_CONFIRM=1
    : "${OMP_NUM_THREADS:=1}"
    export CP2K_DATA_DIR=/usr/share/cp2k

%runscript
    #/bin/bash
    exec cp2k "$@"
